<<<<<<< HEAD
angular.module("dndLists",[]).directive("dndDraggable",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(d,b,c,a){return function(g,f,e){f.attr("draggable","true");f.on("dragstart",function(h){h.dataTransfer.setData("Text",angular.toJson(g.$eval(e.dndDraggable)));h.dataTransfer.effectAllowed=e.dndEffectAllowed||"move";f.addClass("dndDragging");b(function(){f.addClass("dndDraggingSource")},0);c.dropEffect="none";a.isDragging=true;h.stopPropagation()});f.on("dragend",function(h){var i=h.dataTransfer.dropEffect!=="none"?h.dataTransfer.dropEffect:c.dropEffect;i=c.dropEffect;g.$apply(function(){switch(i){case"move":d(e.dndMoved)(g);break;case"copy":d(e.dndCopied)(g);break}});f.removeClass("dndDragging");f.removeClass("dndDraggingSource");a.isDragging=false;h.stopPropagation()});f.on("click",function(h){g.$apply(function(){d(e.dndSelected)(g)});h.stopPropagation()});f.on("selectstart",function(){this.dragDrop();return false})}}]).directive("dndList",["$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(b,c,a){return function(g,f,d){var i=angular.element("<li class='dndPlaceholder'></li>");var j=i[0];var h=f[0];f.on("dragover",function(k){if(!a.isDragging){return true}if(!e(k.dataTransfer.types)){return true}if(j.parentNode!=h){f.append(i)}if(k.target.parentNode===h&&k.target!==j){var l=(k.offsetY||k.layerY)<k.target.offsetHeight/2;h.insertBefore(j,l?k.target:k.target.nextSibling)}else{if(k.target===h){if(k.offsetY<j.offsetTop){while(j.previousElementSibling&&(j.previousElementSibling.offsetHeight===0||k.offsetY<j.previousElementSibling.offsetTop+j.previousElementSibling.offsetHeight/2)){h.insertBefore(j,j.previousElementSibling)}}else{while(j.nextElementSibling&&k.offsetY>j.nextElementSibling.offsetTop+j.nextElementSibling.offsetHeight/2){h.insertBefore(j,j.nextElementSibling.nextElementSibling)}}}}f.addClass("dndDragover");k.preventDefault();k.stopPropagation();return false});f.on("drop",function(l){var n=JSON.parse(l.dataTransfer.getData("Text")||l.dataTransfer.getData("text/plain"));var m=g.$eval(d.dndList);var k=Array.prototype.indexOf.call(h.children,j);g.$apply(function(){m.splice(k,0,n)});if(l.dataTransfer.dropEffect==="none"){c.dropEffect=l.dataTransfer.effectAllowed==="copyMove"?(l.ctrlKey?"copy":"move"):l.dataTransfer.effectAllowed}else{c.dropEffect=l.dataTransfer.dropEffect}i.remove();f.removeClass("dndDragover");l.preventDefault();l.stopPropagation();return false});f.on("dragleave",function(k){f.removeClass("dndDragover");b(function(){if(!f.hasClass("dndDragover")){i.remove()}},100)});function e(l){if(!l){return true}for(var k=0;k<l.length;k++){if(l[k]==="Text"||l[k]==="text/plain"){return true}}return false}}}]).factory("dndDragTypeWorkaround",function(){return{}}).factory("dndDropEffectWorkaround",function(){return{}});
=======
angular.module("dndLists",[]).directive("dndDraggable",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(e,t,n,r){return function(i,s,o){s.attr("draggable","true");if(o.dndDisableIf){i.$watch(o.dndDisableIf,function(e){s.attr("draggable",!e)})}s.on("dragstart",function(e){e=e.originalEvent||e;e.dataTransfer.setData("Text",angular.toJson(i.$eval(o.dndDraggable)));e.dataTransfer.effectAllowed=o.dndEffectAllowed||"move";s.addClass("dndDragging");t(function(){s.addClass("dndDraggingSource")},0);n.dropEffect="none";r.isDragging=true;r.dragType=o.dndType?i.$eval(o.dndType):undefined;e.stopPropagation()});s.on("dragend",function(t){t=t.originalEvent||t;var u=t.dataTransfer.dropEffect!=="none"?t.dataTransfer.dropEffect:n.dropEffect;i.$apply(function(){switch(u){case"move":e(o.dndMoved)(i);break;case"copy":e(o.dndCopied)(i);break}});s.removeClass("dndDragging");s.removeClass("dndDraggingSource");r.isDragging=false;t.stopPropagation()});s.on("click",function(t){t=t.originalEvent||t;i.$apply(function(){e(o.dndSelected)(i)});t.stopPropagation()});s.on("selectstart",function(){if(this.dragDrop)this.dragDrop();return false})}}]).directive("dndList",["$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(e,t,n){return function(r,i,s){function f(e){if(!e)return true;for(var t=0;t<e.length;t++){if(e[t]==="Text"||e[t]==="text/plain")return true}return false}var o=angular.element("<li class='dndPlaceholder'></li>");var u=o[0];var a=i[0];i.on("dragover",function(e){e=e.originalEvent||e;if(!n.isDragging)return true;if(!f(e.dataTransfer.types))return true;if(s.dndAllowedTypes){var t=r.$eval(s.dndAllowedTypes);if(angular.isArray(t)&&t.indexOf(n.dragType)===-1){return true}}if(s.dndDisableIf&&r.$eval(s.dndDisableIf))return true;if(u.parentNode!=a){i.append(o)}if(e.target.parentNode===a&&e.target!==u){var l=(e.offsetY||e.layerY)<e.target.offsetHeight/2;a.insertBefore(u,l?e.target:e.target.nextSibling)}else if(e.target===a){if(e.offsetY<u.offsetTop){while(u.previousElementSibling&&(u.previousElementSibling.offsetHeight===0||e.offsetY<u.previousElementSibling.offsetTop+u.previousElementSibling.offsetHeight/2)){a.insertBefore(u,u.previousElementSibling)}}else{while(u.nextElementSibling&&e.offsetY>u.nextElementSibling.offsetTop+u.nextElementSibling.offsetHeight/2){a.insertBefore(u,u.nextElementSibling.nextElementSibling)}}}i.addClass("dndDragover");e.preventDefault();e.stopPropagation();return false});i.on("drop",function(e){e=e.originalEvent||e;var n=JSON.parse(e.dataTransfer.getData("Text")||e.dataTransfer.getData("text/plain"));var f=r.$eval(s.dndList);var l=Array.prototype.indexOf.call(a.children,u);r.$apply(function(){f.splice(l,0,n)});if(e.dataTransfer.dropEffect==="none"){t.dropEffect=e.dataTransfer.effectAllowed==="copyMove"?e.ctrlKey?"copy":"move":e.dataTransfer.effectAllowed}o.remove();i.removeClass("dndDragover");e.preventDefault();e.stopPropagation();return false});i.on("dragleave",function(t){t=t.originalEvent||t;i.removeClass("dndDragover");e(function(){if(!i.hasClass("dndDragover")){o.remove()}},100)})}}]).factory("dndDragTypeWorkaround",function(){return{}}).factory("dndDropEffectWorkaround",function(){return{}})
>>>>>>> upstream/master
